{
  "id": "translate",
  "version": "1.0",
  "specVersion": "0.8",
  "name": "Greeting workflow",
  "description": "JSON based greeting workflow",
  "start": "ChooseOnLanguage",
  "functions": [
    {
      "name": "JoinGreetingAndNameFunction",
      "type": "expression",
      "operation": ".greeting = .greeting+.name | .greeting"
    }
  ],
  "states": [
    {
      "name": "ChooseOnLanguage",
      "type": "switch",
      "dataConditions": [
        {
          "condition": "${ .language == \"Portuguese\" }",
          "transition": "InjectPortugueseGreeting"
        },
        {
          "condition": "${ .language == \"Spanish\" }",
          "transition": "InjectSpanishGreeting"
        }
      ],
      "defaultCondition": {
        "transition": "InjectEnglishGreeting"
      }
    },
    {
      "name": "InjectEnglishGreeting",
      "type": "inject",
      "data": {
        "greeting": "Hello from Serverless Workflow, "
      },
      "transition": "JoinGreetingAndName"
    },
    {
      "name": "InjectPortugueseGreeting",
      "type": "inject",
      "data": {
        "greeting": "Ol√° do Serverless Workflow, "
      },
      "transition": "JoinGreetingAndName"
    },
    {
      "name": "InjectSpanishGreeting",
      "type": "inject",
      "data": {
        "greeting": "Saludos desde Serverless Workflow, "
      },
      "transition": "JoinGreetingAndName"
    },
    {
      "name": "JoinGreetingAndName",
      "type": "operation",
      "actions": [
        {
          "functionRef": {
            "refName": "JoinGreetingAndNameFunction",
            "arguments": {
              "greeting": "${ .greeting }",
              "name": "${ .name }"
            }
          },
          "actionDataFilter": {
            "toStateData": "${ .greeting }"
          }
        }
      ],
      "stateDataFilter": {
        "output": "${ .greeting}"
      },
      "end": true
    }
  ]
}